<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; color: #333; line-height: 1.6; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 30px auto; padding: 20px; background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { color: #0056b3; text-align: center; margin-bottom: 10px; min-height: 1.2em; font-size: 1.6em; }
        textarea { width: 95%; min-height: 150px; margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
        button { padding: 12px 35px; font-size: 1rem; color: #ffffff; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; }
        .button-container { text-align: center; margin-top: 15px; }
        #countButton { background-color: #007bff; }
        #countButton:hover { background-color: #0056b3; }
        #clearButton { background-color: #6c757d; margin-left: 10px; }
        #clearButton:hover { background-color: #5a6268; }
        #result { margin-top: 20px; padding: 15px; background-color: #e9ecef; border-left: 5px solid #007bff; border-radius: 4px; font-family: 'Courier New', Courier, monospace; line-height: 1.8; }
        footer { margin-top: 60px; font-style: italic; text-align: center; font-size: 0.6em; color: #777; }

        .traffic-light-display { display: flex; justify-content: center; align-items: center; padding: 10px; height: 50px; }
        .traffic-light-display .light { width: 30px; height: 30px; border-radius: 50%; background-color: #D3D3D3; margin: 0 5px; transition: background-color 0.3s ease, box-shadow 0.3s ease; border: 2px solid #A9A9A9; box-shadow: inset 0 -2px 4px rgba(0,0,0,0.2); }
        .traffic-light-display .light.red-light.active { background-color: #FF0000; border-color: #B20000; box-shadow: 0 0 15px #FF0000, inset 0 -2px 4px rgba(0,0,0,0.4); }
        .traffic-light-display .light.yellow-light.active { background-color: #FFFF00; border-color: #B2B200; box-shadow: 0 0 15px #FFFF00, inset 0 -2px 4px rgba(0,0,0,0.4); }
        .traffic-light-display .light.green-light.active { background-color: #00FF00; border-color: #00B200; box-shadow: 0 0 15px #00FF00, inset 0 -2px 4px rgba(0,0,0,0.4); }
        
        #trafficLightComment { text-align: center; margin-top: 0px; margin-bottom: 20px; font-style: italic; color: #555; min-height: 1.5em; line-height: 1.5em; font-size: 0.9em; }
    </style>
</head>
<body>
 <div class="container">
    <!-- –ó–ê–ì–û–õ–û–í–û–ö –ë–£–î–ï–¢ –£–°–¢–ê–ù–û–í–õ–ï–ù –ß–ï–†–ï–ó JS -->
    <h1 id="mainPageTitle">–ó–∞–≥—Ä—É–∑–∫–∞ –ù–∞–∑–≤–∞–Ω–∏—è...</h1> 
    
    <div id="trafficLightContainer" class="traffic-light-display">
        <span class="light red-light" id="lightRed"></span>
        <span class="light yellow-light" id="lightYellow"></span>
        <span class="light green-light" id="lightGreen"></span>
    </div>
    <div id="trafficLightComment">–°–≤–µ—Ç–æ—Ñ–æ—Ä –∂–¥—ë—Ç –≤–∞—à–∏—Ö —Ç–≤–æ—Ä–µ–Ω–∏–π... ‚ú®</div>

    <textarea id="inputText" placeholder="–í–∞—à —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å..."></textarea>
    <div class="button-container">
        <button id="countButton">START</button>
        <button id="clearButton">–û–ß–ò–°–¢–ò–¢–¨</button>
    </div>
    <div id="result">–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</div>
    <footer> –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ø–æ—ç—Ç–æ–≤ (–∏ –Ω–µ —Ç–æ–ª—å–∫–æ!) –õ–µ–Ω—ã –∏ –°–≤–µ—Ç—ã! </footer>
 </div>
 <script>
    // --- ‚≠ê –ú–ê–°–°–ò–í –°–õ–£–ß–ê–ô–ù–´–• –ó–ê–ì–û–õ–û–í–ö–û–í ‚≠ê ---
    const creativeTitles = [
        "–†–∏—Ç–º–æ–≥—Ä–∞—Ñ –ü–æ—ç–∑–∏–∏ üñåÔ∏è", "–°–ª–æ–≥–æ–ú–µ—Ç—Ä ü§ñ", "–£–∫—Ä–æ—Ç–∏—Ç–µ–ª—å –°–ª–æ–≥–æ–≤ üé≠",
        "–ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π –ú–µ—Ç—Ä–æ–Ω–æ–º üé∂", "–°–ª–æ–≥–æ–≤–∞—è –ò–Ω–∫–≤–∏–∑–∏—Ü–∏—è üòà (–®—É—Ç–∫–∞!)", "–°–ª–æ–≥–æ-–ú–∞–≥–∏—è ‚ú®",
        "–ö–∞–º–µ—Ä—Ç–æ–Ω –ú—É–∑—ã üéµ", "–°–∏–ª–ª–∞–±–æ-–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä v0.1 ‚öõÔ∏è", "–°–ª–æ–≥–æ-–ù–∏–Ω–¥–∑—è: –ë–µ—Å—à—É–º–Ω—ã–π –°—á—ë—Ç! ü§∫",
        "–°–ª–æ–≥–æ–≤–∞—è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ üîä", "–°–õ–û–ì–æ–≤–æ—Ä–æ—Ç –°–æ–±—ã—Ç–∏–π –≤ –°—Ç–∏—Ö–µ! üå™Ô∏è",
        "–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –†–∏—Ç–º–∞ üõ†Ô∏è", "–ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π –ö–æ–¥-–ß–µ–∫–∏–Ω ‚úÖ", "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –°—Ç–∏–ª—è üß™",
        "–ù–µ –°—á–∏—Ç–∞–π –í–æ—Ä–æ–Ω ‚Äì –°—á–∏—Ç–∞–π –°–ª–æ–≥–∏! üëÄ", "–î–æ–∫—Ç–æ—Ä –°–ª–æ–≥: –ü—Ä–∏—ë–º –ø–æ –ó–∞–ø–∏—Å–∏! ü©∫",
        "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –°—Ç–∏—Ö–∞: –ò–∑–º–µ—Ä–µ–Ω–∏–µ –†–∏—Ç–º–∞ üèõÔ∏è", "–í–∞—à –õ–∏—á–Ω—ã–π –°–ª–æ–≥–æ-–°–æ–º–µ–ª—å–µ üç∑",
        "–°–ª–æ–≥–æ–≤–æ–π –°–∫–∞–Ω–µ—Ä '–û–∫–æ –ü–æ—ç—Ç–∞' üëÅÔ∏è", "–≠—Ç–æ –ù–ï –ø—Ä–æ—Å—Ç–æ –°—á—ë—Ç—á–∏–∫ –°–ª–æ–≥–æ–≤ üòâ"
    ];

    // --- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
    document.addEventListener('DOMContentLoaded', function() {
        const mainTitleElement = document.getElementById('mainPageTitle');
        if (mainTitleElement) {
            mainTitleElement.innerHTML = creativeTitles[Math.floor(Math.random() * creativeTitles.length)];
        }
    });

    // --- –û—Å—Ç–∞–ª—å–Ω–æ–π JavaScript –∫–æ–¥ ---
    const textArea = document.getElementById('inputText');
    const countButton = document.getElementById('countButton');
    const resultDiv = document.getElementById('result');
    const clearButton = document.getElementById('clearButton');
    
    const lightRed = document.getElementById('lightRed');
    const lightYellow = document.getElementById('lightYellow');
    const lightGreen = document.getElementById('lightGreen');
    const trafficLightCommentDiv = document.getElementById('trafficLightComment');

    const vowels = "–∞–µ—ë–∏–æ—É—ã—ç—é—è";
    const initialResultText = resultDiv.innerHTML;
    
    const comments = { // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
        green: [ "–†–∏—Ç–º –±—å—ë—Ç—Å—è —Ä–æ–≤–Ω–æ, –∫–∞–∫ —Å–µ—Ä–¥—Ü–µ –∫–∏–±–æ—Ä–≥–∞! ü§ñ‚ù§Ô∏è", "–°–ª–æ–≥–∏ –º–∞—Ä—à–∏—Ä—É—é—Ç –≤ –Ω–æ–≥—É! üíÇ‚Äç‚ôÇÔ∏è", "–ì–∞—Ä–º–æ–Ω–∏—è! –ú—É–∑–∞ –æ–¥–æ–±—Ä–∏—Ç–µ–ª—å–Ω–æ –∫–∏–≤–∞–µ—Ç! ü•Ç", "–ó–µ–ª—ë–Ω—ã–π —Å–≤–µ—Ç –ø–æ—ç–∑–∏–∏! üöÄ", "–í–∞—à–∏ —Å—Ç—Ä–æ—á–∫–∏ –ª—å—é—Ç—Å—è, –∫–∞–∫ –ø–µ—Å–Ω—è! üé∂", "–≠—Ç–∞–ª–æ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞! üìè" ],
        yellow: [ "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–µ —É—Ö–∞–±—ã! üöß", "–•–º, –ø–∞—Ä–∞ —Å–ª–æ–≥–æ–≤ —Ä–µ—à–∏–ª–∞ —É—Å—Ç—Ä–æ–∏—Ç—å —Ñ–ª–µ—à–º–æ–±... ü§î", "–ù–µ–π—Ä–æ–Ω–∫–∞ —á—É–µ—Ç –ª—ë–≥–∫—É—é –∞—Ä–∏—Ç–º–∏—é. üíä", "–ñ–µ–ª—Ç—ã–π! –ü–æ—Ä–∞ –Ω–∞ –ø–æ—ç—Ç–∏—á–µ—Å–∫–∏–π –ø–∏—Ç-—Å—Ç–æ–ø? üèéÔ∏èüí®", "–†–∏—Ç–º –Ω–µ–º–Ω–æ–≥–æ '—Ö—Ä–æ–º–∞–µ—Ç'. ü¶µ", "–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–µ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏–∏. üì°" ],
        red: [ "–ö—Ä–∞—Å–Ω—ã–π! –¢—Ä–µ–≤–æ–≥–∞! –†–∏—Ç–º –∑–∞–±–ª—É–¥–∏–ª—Å—è! üå≤", "–°–ª–æ–≥–∏ —Ä–∞–∑–±–µ–∂–∞–ª–∏—Å—å, –∫–∞–∫ –º—ã—à–∏! üôÄ", "–ú–æ–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –≤ –ø–∞–Ω–∏–∫–µ! üëΩ", "–°—Ç–æ–ø! –≠—Ç–æ –¥—ç—Ç-–º–µ—Ç–∞–ª —Å–ª–æ–≥–æ–≤! ü§òüé∏", "–†–∏—Ç–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–∞–ø—Å! üöí", "–ê–Ω–∞—Ä—Ö–∏—è —Å–ª–æ–≥–æ–≤! üè¥‚Äç‚ò†Ô∏è" ],
        default: [ "–°–≤–µ—Ç–æ—Ñ–æ—Ä –∂–¥—ë—Ç –≤–∞—à–∏—Ö —Ç–≤–æ—Ä–µ–Ω–∏–π... ‚ú®", "–ü–æ–ª–µ —á–∏—Å—Ç–æ, –∫–∞–∫ —Å–æ–≤–µ—Å—Ç—å –∫–∏–±–æ—Ä–≥–∞.", "–î—Ä–µ–º–ª—é –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ —Ä–∏—Ñ–º... üò¥", "–ì–æ—Ç–æ–≤–∞ –∫ –∞–Ω–∞–ª–∏–∑—É! –ó–∞–ø—É—Å–∫–∞–π—Ç–µ! üöÄ" ]
    };

    function getRandomComment(type) { /* ... (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */ const typeComments = comments[type] || comments.default; return typeComments[Math.floor(Math.random() * typeComments.length)]; }
    function countSyllablesInLine(line) { /* ... (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */ const lowerLine = line.toLowerCase(); let syllableCount = 0; for (let i = 0; i < lowerLine.length; i++) { if (vowels.includes(lowerLine[i])) syllableCount++; } if (syllableCount === 0 && line.trim().length > 0) syllableCount = 1; return syllableCount;}
    function getDominantSyllableCount(syllableCounts) { /* ... (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */ if (!syllableCounts || syllableCounts.length === 0) return 0; const countsMap = new Map(); let maxFreq = 0; let dominantCount = syllableCounts[0]; for (const count of syllableCounts) { countsMap.set(count, (countsMap.get(count) || 0) + 1); if (countsMap.get(count) > maxFreq) { maxFreq = countsMap.get(count); dominantCount = count; } } console.log("–î–æ–º–∏–Ω–∞–Ω—Ç–Ω–æ–µ –∫–æ–ª-–≤–æ —Å–ª–æ–≥–æ–≤:", dominantCount, "–ß–∞—Å—Ç–æ—Ç–∞:", maxFreq); return dominantCount; }
    
    function resetTrafficLightsAndComment() { /* ... (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */ lightRed.classList.remove('active'); lightYellow.classList.remove('active'); lightGreen.classList.remove('active'); trafficLightCommentDiv.textContent = getRandomComment('default'); }

    function processAndDisplayResults() { /* ... (–∫–æ–¥ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ç–≤–æ–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –ª–æ–≥–∏–∫–∞ —Ç–∞ –∂–µ) ... */
        const fullText = textArea.value;
        resetTrafficLightsAndComment(); 

        if (fullText.length === 0) {
            resultDiv.innerHTML = "–ü–æ–ª–µ –≤–≤–æ–¥–∞ –¥–µ–≤—Å—Ç–≤–µ–Ω–Ω–æ —á–∏—Å—Ç–æ. –ñ–¥—É —Ç–≤–æ–µ–≥–æ —Ç–µ–∫—Å—Ç–∞! üòâ";
            return;
        }

        const lines = fullText.split('\n');
        let resultsHTML = ""; let hasRealContent = false; const syllableCountsPerLine = [];
        for (let i = 0; i < lines.length; i++) { const currentLine = lines[i]; if (currentLine.trim().length > 0) { const syllables = countSyllablesInLine(currentLine); syllableCountsPerLine.push(syllables); resultsHTML += `${currentLine}   ${syllables}<br>`; hasRealContent = true; } else { resultsHTML += `<br>`; } }

        if (!hasRealContent) {
            resultDiv.innerHTML = "–í–∏–∂—É —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã... ü§î –î–æ–±–∞–≤—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ª–æ–≤–∞.";
        } else {
            resultDiv.innerHTML = resultsHTML;
            let commentType = 'default'; 

            if (syllableCountsPerLine.length > 0) {
                const dominantCount = getDominantSyllableCount(syllableCountsPerLine);
                let yellowWarnings = 0; let redAlerts = 0;
                if (dominantCount > 0) {
                    for (const count of syllableCountsPerLine) {
                        const deviation = Math.abs(count - dominantCount);
                        if (deviation === 2) yellowWarnings++;
                        else if (deviation > 2) redAlerts++;
                    }
                }
                
                if (syllableCountsPerLine.length <= 1 && yellowWarnings === 0 && redAlerts === 0) {
                     commentType = "green"; lightGreen.classList.add('active');
                } else if (redAlerts >= 2 || (redAlerts === 1 && yellowWarnings >= 2) || yellowWarnings >= 4) {
                    commentType = "red"; lightRed.classList.add('active');
                } else if (redAlerts === 1 || yellowWarnings >= 1) { 
                    commentType = "yellow"; lightYellow.classList.add('active');
                } else {
                    commentType = "green"; lightGreen.classList.add('active');
                }
                trafficLightCommentDiv.textContent = getRandomComment(commentType);
            } else {
                 trafficLightCommentDiv.textContent = getRandomComment('default');
            }
        }
    }

    function clearFields() { /* ... (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */ textArea.value = ""; resultDiv.innerHTML = initialResultText; resetTrafficLightsAndComment(); }

    if (countButton) countButton.addEventListener('click', processAndDisplayResults);
    if (clearButton) clearButton.addEventListener('click', clearFields);
    
    resetTrafficLightsAndComment(); // –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
 </script>
</body>
</html>
